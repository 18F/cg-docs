---
menu:
  main:
    parent: deployment
title: Deploying the admin UI
weight: 10
---

This guide covers the high level stops required to configure, deploy and add users to the Admin UI as part of an existing Cloud Foundry environment.

#### Background

The Cloud Foundry Admin UI provides a high level overview of metrics pulled from the Cloud Foundry UAA, Cloud Controller, NATS and databases.

#### Prerequisites

- Knowledge of the secrets and other properties specified in the initial deployment manifest.
- The [Spiff](https://github.com/cloudfoundry-incubator/spiff) templating tool.
- The [uaac](https://github.com/cloudfoundry/cf-uaac) command line client.
- A reachable CF UAA instance.

#### Procedure

1. [Deployment]({{< relref "#deployment" >}})
1. [Configuration]({{< relref "#configuration" >}})
1. [Operation]({{< relref "#operation" >}})

#### Deployment

As of this writing, instructions for deploying the Admin UI bosh release default to the v3 release.  We have deployed the v4 release as the included deployment template covers required properties and job definitions not present in v3.

1. Obtain the current release source.

		git clone git@github.com:cloudfoundry-community/admin-ui-boshrelease.git
		cd admin-ui-boshrelease
		git checkout tags/v4

1. Upload the v4 release to do be used during deployment.

		bosh upload release releases/admin-ui-4.yml

1. Source the required properties outlined in `templates/admin-ui-deployment.yml` from the inintial Cloud Foundry deployment manifests and stubs. Elements to source for the resulting `admin-ui-properties.yml` include:

		compilation:
		meta:
		networks:
		properties:
		resource_pools:
		update:

1. Create a deployment manifest with spiff after sourcing the required properties into `admin-ui-properties.yml`. Source the required secrets from the `cf-secrets.yml` used during the initial deployment.

		spiff merge \
		  templates/admin-ui-deployment.yml \
		  admin-ui-properties.yml \
		  /path/to/cf-secrets.yml > manifest.yml

1. Generate a deployment from the manifest.

		bosh deployment manifest.yml

1. Initiate the deployment.

		bosh deploy

1. Run the registration errand.

		bosh run errand register_admin_ui

#### Configuration

Admin UI users and administrators must be part of the groups `admin_ui.users` or `admin_ui.admins` respectively.  Add new members with the uaac cli:

	uaac member add admin_ui.user USERNAME

Or...

	uaac member add admin_ui.admins USERNAME


#### Operation

Access the Admin UI at the uri specified in the deployment manifest. By default this is `https://admin.YOUR-SYSTEM-DOMAIN` as generated by `meta.subdomain "." properties.system_domain` in the `templates/admin-ui-deployment.yml`.
